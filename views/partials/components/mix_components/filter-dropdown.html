<!--trickery because the ng-ifs break the ng-model binding, so use this hidden field for two way binding--><input type="hidden" ng-model="ngModel"/><span uib-dropdown="uib-dropdown" dropdown-append-to-body="dropdown-append-to-body"><button ng-if="isButton" uib-dropdown-toggle="uib-dropdown-toggle" auto-close="outsideClick" ng-click="checkUp()" class="square-btn"><i class="{{btnIconClass}}"></i></button><span ng-if="!isButton" uib-dropdown-toggle="uib-dropdown-toggle" auto-close="outsideClick" ng-click="checkUp()" class="toggle"> <span ng-class="ddClass" class="filter pointable-cursor"><span ng-if="!ngModel" class="truncate">{{defaultTitle}}&nbsp;</span><span ng-if="ngModel.title" class="truncate">{{ngModel.title}}&nbsp;</span><!--in case ngModel is not an object, but just a string--><span ng-if="ngModel &amp;&amp; !ngModel.title" class="truncate">{{ngModel}}&nbsp;</span><!--only show if not emulating normal select option element--><i ng-if="ddClass != 'ui-select'" class="fa fa-angle-down"></i></span></span><div uib-dropdown-menu="uib-dropdown-menu" ng-class="{'dropup': dropUp}" class="uib-dropdown-menu uib-dropdown-menu-flexing"><div class="uib-dropdown-click-close"></div><!--inline style to center dropdowns--><div style="margin-left: {{leftMargin}}" class="uib-dropdown-flex-content"><div ng-if="showTriangle == 'true'" ng-class="{'right': isRight == 'true'}" class="uib-dropdown-triangle"></div><div ng-click="$event.stopPropagation();" ng-class="{'right': isRight == 'true'}" class="dd-search row vert-align no-hover"><input ng-model="searchKey" placeholder="Search" class="form-control h6 no-margin"/><i class="fa fa-search"></i></div><div ng-class="{'right': isRight == 'true'}" class="uib-dropdown-flex"><ul style="min-width:{{minWidth}}px;" class="dd-list list-unstyled"><li ng-repeat="val in valsList | filter: {title : searchKey} track by $index" ng-click="setVal(val)" ng-class="{active: (ngModel == val.title || ngModel == val)}" class="row pointable-cursor vert-align"><div ng-if="val.icon" class="col-xs-2"><i ng-class="val.icon"></i></div><div ng-class="{'col-xs-10': val.icon, 'col-xs-12': !val.icon}"><h6 class="no-margin truncate">{{val.title}}</h6></div></li></ul></div></div></div></span>