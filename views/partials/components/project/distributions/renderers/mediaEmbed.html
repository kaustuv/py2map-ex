<div ng-class="{'small-media':(isSmall == 'true')}" class="media-embed text-left"><div ng-if="activeEmbed || activeImg" ng-click="killActiveEmbed();" class="overlay animate-fade vert-align"><span class="close-btn text-ultralight">&times;</span><div class="media"><div ng-if="activeEmbed" ng-bind-html="activeEmbed" class="text-center"></div><div ng-if="activeImg" class="img-container vert-align"><img ng-src="{{activeImg}}"/></div><div class="descr"><p ng-if="activeDescription">{{activeDescription}}</p></div><div ng-if="activeTags &amp;&amp; activeTags.length &gt; 0 &amp;&amp; activeTags[0]" class="tags"><div ng-repeat="tag in activeTags" class="h6 tag">{{tag}}</div></div></div></div><div ng-if="media.embedlyJson" class="accelerate animate-fade"><div ng-if="(media.embedSafe &amp;&amp; isPinnable) || isPinned === 'true'"><div ng-if="isPinned !== 'true'" ng-click="pinMedia(url, nodeColorStr)" uib-tooltip="Play while continuing to explore." tooltip-placement="top" tooltip-append-to-body="true" class="pin-btn"><i class="fa fa-thumb-tack"></i></div><div ng-if="isPinned === 'true'" ng-click="unpinMedia()" class="close-btn"><i class="fa fa-close"></i></div></div><div ng-if="media.embedSafe" ng-click="setActiveEmbed(media.embedlyJson);"><div ng-if="isSmall == 'true'"><div style="background-image:url({{media.embedlyJson.thumbnail_url}});" class="img"></div></div><div ng-if="isSmall != 'true'" class="media-bkgrnd"><div ng-bind-html="media.embedSafe" class="embed"></div><p ng-if="(media.description || media.embedlyJson.description) &amp;&amp; isPinned !== 'true'" class="descr text-small">{{media.description || media.embedlyJson.description}}</p></div></div><a ng-class="{'full-width':media.fullWidth}" ng-if="media.embedlyJson.type == 'link' " target="_blank" href="{{media.embedlyJson.url}}" class="link"><div ng-if="isSmall != 'true'"><img ng-src="{{media.embedlyJson.thumbnail_url}}" class="thumb"/><h5 style="color:{{nodeColorStr}}" class="title">{{media.embedlyJson.title}}</h5><p class="descr wrap text-small">{{media.description || media.embedlyJson.description}}</p><div class="clearfix"></div></div><div ng-if="isSmall == 'true'"><div style="background-image:url({{media.embedlyJson.thumbnail_url}});" class="img"></div></div></a><div ng-if="media.embedlyJson.type == 'photo' " ng-click="setActiveEmbed(media.embedlyJson)"><img ng-if="isSmall != 'true'" ng-src="{{media.embedlyJson.url}}"/><div ng-if="isSmall == 'true'" style="background-image:url({{media.embedlyJson.url}});" class="img accelerate contain"></div><p ng-if="media.description" class="descr">{{media.description}}</p></div></div><div ng-if="!media.embedlyJson" class="animate-fade"><div ng-if="media.embedSafe"><div ng-bind-html="media.embedSafe" class="embed"></div><p ng-if="media.description &amp;&amp; isPinned !== 'true'" class="descr text-small">{{media.description}}</p></div></div><div ng-if="media.tags &amp;&amp; media.tags.length &gt; 0 &amp;&amp; media.tags[0]  &amp;&amp; isPinned !== 'true'" class="tags"><div ng-repeat="tag in media.tags" class="h6 tag">{{tag}}</div></div></div>