<div ng-controller="DataPresentationCtrl" ng-mouseleave="rightPanelExited();" class="legend-container flex-vert-container width-100"><div class="header"><div class="row vert-align main"><div class="col-xs-12"><h6 class="title text-uppercase truncate vert-align"><div class="title-space"><span class="inline nowrap"><span>Sized By: &nbsp;</span></span><span class="inline nowrap"><dir-filter-dropdown ng-model="vm.nodeSizeAttr" change-val="sizeByAttrUpdate()" vals-list="nodeSizeAttrs" default-title=" 'Size By' " show-triangle="false" dd-class="text-link" is-right="false" left-margin="120px"></dir-filter-dropdown><span ng-if="vm.nodeSizeAttr.metadata.descr" uib-tooltip="{{vm.nodeSizeAttr.metadata.descr}}" tooltip-append-to-body="true" tooltip-placement="bottom-left">&nbsp;&nbsp;&nbsp;<i class="fa fa-info-circle"></i></span></span></div></h6></div></div><div ng-click="$event.stopPropagation()" ng-if="!isNodeColorNumeric" class="row vert-align main"><div class="col-xs-12"><h6 class="title text-uppercase truncate vert-align"><div class="title-space"><span class="inline nowrap"><span>Sorted by:&nbsp;&nbsp;</span><span uib-dropdown="uib-dropdown" dropdown-append-to-body="dropdown-append-to-body"><span uib-dropdown-toggle="uib-dropdown-toggle" auto-close="outsideClick" ng-click="keepDrawerOpen = true;"><span class="text-link">{{mapprSettings.legendSortOption}}<i class="fa fa-angle-down"></i></span></span><div uib-dropdown-menu="uib-dropdown-menu" class="uib-dropdown-menu uib-dropdown-menu-flexing"><div ng-click="keepDrawerOpen = false;" class="uib-dropdown-click-close"></div><!--inline style to center dropdowns--><div style="margin-left: 25px;" class="uib-dropdown-flex-content"><div class="uib-dropdown-triangle"></div><div class="uib-dropdown-flex center"><ul class="dd-list list-unstyled"><li ng-click="sortByFreq(); keepDrawerOpen = false;" class="row vert-align pointable-cursor"><div class="col-xs-12"><h6 class="no-margin">Frequency</h6></div></li><li ng-click="sortByAlpha(); keepDrawerOpen = false;" class="row vert-align pointable-cursor"><div class="col-xs-12"><h6 class="no-margin">Alphabetic</h6></div></li></ul></div></div></div></span><span>&nbsp;&nbsp;</span><button type="button" ng-click="mapprSettings.legendSortIsReverse = !mapprSettings.legendSortIsReverse" uib-tooltip="Reverse Order" tooltip-placement="bottom-left" tooltip-append-to-body="true"><i ng-if="!mapprSettings.legendSortIsReverse" class="fa fa-long-arrow-down text-link no-underline"></i><i ng-if="mapprSettings.legendSortIsReverse" class="fa fa-long-arrow-up text-link no-underline"></i></button></span><div ng-if="ui.showViewToggle" class="col-xs-5 nowrap"><span class="text-link"><span ng-if="!ui.summaryToggleOpen" ng-click="ui.summaryToggleOpen = true;"><i class="fa fa-caret-right fa-fw"></i><span>Expanded View</span></span><span ng-if="ui.summaryToggleOpen" ng-click="ui.summaryToggleOpen = false;"><i class="fa fa-caret-down fa-fw"></i><span>Compact View</span></span></span></div></div></h6></div></div><div class="row vert-align main colored-legend"><div class="col-xs-12"><h6 class="title text-uppercase truncate vert-align"><div class="title-space"><span class="inline nowrap"><span>Colored</span><span>&nbsp;By:&nbsp;</span></span><span class="inline nowrap"><dir-filter-dropdown ng-click="$event.stopPropagation();" ng-if="!ui.showingLinks" ng-model="dataGroupsInfo.colorNodesBy" change-val="colorByAttrUpdate(val)" default-title="dataGroupsInfo.colorNodesBy.title" vals-list="nodeColorAttrs" show-triangle="false" dd-class="text-link" is-right="false"></dir-filter-dropdown><span uib-dropdown="uib-dropdown" dropdown-append-to-body="dropdown-append-to-body" ng-if="ui.showingLinks"><span uib-dropdown-toggle="uib-dropdown-toggle" auto-close="outsideClick" class="text-link">{{dataGroupsInfo.colorEdgesBy.title}}<i class="fa fa-angle-down"></i></span><div uib-dropdown-menu="uib-dropdown-menu" class="uib-dropdown-menu uib-dropdown-menu-flexing"><div class="uib-dropdown-click-close"></div><!--inline style to center dropdowns--><div style="margin-left: 28px;" class="uib-dropdown-flex-content"><div class="uib-dropdown-triangle right"></div><div class="uib-dropdown-flex right"><ul class="dd-list list-unstyled"><li ng-repeat="colorAttr in edgeColorAttrs" class="row vert-align pointable-cursor"><div ng-click="colorByEdgeAttrUpdate(colorAttr);" class="col-xs-12"><h6 class="no-margin text-uppercase">{{colorAttr.title}}</h6></div></li></ul></div></div></div></span><span ng-if="dataGroupsInfo.colorNodesBy.metadata.descr" uib-tooltip="{{dataGroupsInfo.colorNodesBy.metadata.descr}}" tooltip-append-to-body="true" tooltip-placement="bottom-left" class="subtitle">&nbsp;&nbsp;&nbsp;<i class="fa fa-info-circle"></i></span></span></div></h6></div></div><div class="clearfix"></div></div><div class="list-content panel-scroll flex-fill"><!--/--><!--/ Node Color Panel--><!--/--><div ng-if="!ui.showingLinks" class="width-100"><ul ng-if="mapprSettings.nodeColorStrat != 'select'" class="panel-list list-unstyled over-hidden"><!-- Ordinal Legend display--><li ng-if="!isNodeColorNumeric" ng-class="{'highlighted' : l.highlightOnNodeHover}" ng-repeat="l in dataGroupVMs | limitTo: ui.dataGroupsViewCount track by l.originalTitle" uib-tooltip="{{::l.name}}" tooltip-append-to-body="true" tooltip-placement="right" class="panel-item pointable-cursor animate-repeat"><div ng-click="hoverNodesByAttrib(undefined, $event); selectNodesByAttrib(l.originalTitle, $event)" ng-mouseenter="hoverNodesByAttrib(l.originalTitle, $event, 700); !ui.editEnabled &amp;&amp; (l.showClusterEdit = true);" ng-mouseleave="hoverNodesByAttrib(undefined, $event); !l.editClusterName &amp;&amp; (l.showClusterEdit = false);" uib-tooltip="{{l.descr}}" tooltip-placement="left" tooltip-append-to-body="true" class="flex-container pointable-cursor"><div ng-if="!l.editClusterName" ng-style="l.color" class="legend-icon"></div><div ng-if="(l.archetypes.length &gt; 0 || l.bridgers.length &gt; 0) &amp;&amp; ui.summaryToggleOpen" class="animate-fade"><div style="border-color: {{l.colorval}}" ng-class="{'only-one':(l.bridgers.length == 0 || l.archetypes.length == 0)}" class="legend-line-down"></div></div><input type="color" ng-model="l.colorval" ng-click="$event.stopPropagation();" ng-change="changeColor(l, l.colorval)" ng-if="l.editClusterName"/><h6 ng-if="!l.editClusterName" class="panel-number">({{l.num}})</h6><h6 ng-if="!l.editClusterName" class="less-gutter panel-text">{{l.name}}</h6><form-inline ng-if="l.editClusterName" ng-click="$event.stopPropagation()" class="panel-edit-form"><textarea type="text" ng-model="l.name" placeholder="Name" ng-change="updateLabelForAttrValue(l)" ng-model-options="{ debounce: 1000 }" class="form-control small-control h6 no-margin width-100"></textarea><textarea type="text" ng-model="l.descr" placeholder="Description" ng-change="updateDescrForAttrValue(l)" ng-model-options="{ debounce: 1000 }" class="form-control small-control h6 width-100"></textarea><div ng-show="l.showClusterEdit &amp;&amp; l.editClusterName" class="less-gutter"></div><button type="button" ng-click="$event.stopPropagation(); updateClusterInfo(l); l.showClusterEdit = false; l.editClusterName = false;" class="square-btn small-btn panel-btn pull-left"><i class="fa fa-fw fa-check"></i></button><button type="button" ng-click="$event.stopPropagation(); l.showClusterEdit = false; l.editClusterName = false; discardClusterInfoUpdates(l)" class="square-btn small-btn panel-btn pull-left"><i class="fa fa-fw fa-times"></i></button></form-inline><div ng-show="!l.editClusterName" class="panel-edit-icon"><div ng-show="l.showClusterEdit &amp;&amp; !l.editClusterName"><a type="button" ng-click="$event.stopPropagation(); l.editClusterName = true;" class="visible-btn vcenter"><i class="color-black fa fa-pencil"></i></a></div></div></div><div ng-if="ui.summaryToggleOpen" class="animate-fade"><div ng-show="l.archetypes.length &gt; 0" class="row vert-align"><div class="col-xs-3"><div style="border-color: {{l.colorval}}" class="legend-line-across"></div></div><div class="col-xs-9"><div ng-click="selectNodesByIds(l.archetypes, $event); $event.stopPropagation();" ng-mouseenter="hoverNodesByIds(l.archetypes, $event); $event.stopPropagation();" ng-mouseleave="hoverNodesByIds([], $event); $event.stopPropagation();" class="row vert-align less-gutter"><div class="col-xs-3 less-gutter text-center"><i ng-style="l.color" class="fa fa-1-3x fa-bullseye"></i></div><div class="col-xs-9"><div class="h6 less-gutter pointable-cursor">{{l.archetypes.length}} Archetypes</div></div></div></div></div><div ng-show="l.bridgers.length &gt; 0" class="row vert-align"><div class="col-xs-3"><div style="border-color: {{l.colorval}}" class="legend-line-across"></div></div><div class="col-xs-9"><div ng-href="" ng-click="selectNodesByIds(l.bridgers, $event); $event.stopPropagation();" ng-mouseenter="hoverNodesByIds(l.bridgers, $event); $event.stopPropagation();" ng-mouseleave="hoverNodesByIds([], $event); $event.stopPropagation();" class="row vert-align less-gutter"><div class="col-xs-3 less-gutter text-center"><i ng-style="l.color" class="icon-bridger"></i></div><div class="col-xs-4"><div class="h6 less-gutter pointable-cursor">{{l.bridgers.length}} Bridgers</div></div><div class="col-xs-1"></div></div></div></div></div></li><!-- Numerical Legend display--><li ng-if="isNodeColorNumeric" ng-class="{'highlighted' : l.highlightOnNodeHover}" ng-repeat="l in dataGroupVMs | limitTo: ui.dataGroupsViewCount track by l.originalTitle" ng-click="hoverNodesByAttrib(undefined, $event); selectNodesByAttrib(l.num, $event)" ng-mouseenter="hoverNodesByAttrib(l.num, $event, 700)" ng-mouseleave="hoverNodesByAttrib(undefined, $event)" uib-tooltip="{{l.descr}}" tooltip-placement="left" tooltip-append-to-body="true" class="panel-item pointable-cursor vert-align row"><div class="col-xs-2"><div ng-style="l.color" class="legend-icon-numeric"></div></div><div ng-style="{'cursor': 'pointer'}" class="col-xs-10 h6">{{l.count}} {{l.name}}</div></li><div><div class="col-xs-12"><a ng-show="dataGroupVMs.length &gt; ui.dataGroupsViewCount" ng-click="loadMoreDataGroups(); $event.stopPropagation();" class="more-text h6 pull-right pointable-cursor"><em>more&hellip;</em></a></div></div></ul><!-- if node color selected--><ul ng-if="mapprSettings.nodeColorStrat == 'select'" class="panel-list"><li class="panel-item vert-align row vert-align"><div class="col-xs-12"><h6>Color</h6></div></li><li class="panel-item vert-align row"><div class="col-xs-1"><i style="color:{{mapprSettings.nodeColorDefaultValue}};" class="fa-1-3x icon-legend-dots"></i></div><div class="col-xs-10 h6">All Nodes</div></li></ul></div><!--/--><!--/ Edge Color Panel--><!--/--><div ng-if="ui.showingLinks" class="width-100"><!--if using an attr for edge color--><ul ng-if="mapprSettings.edgeColorStrat == 'attr'" class="panel-list list-unstyled"><!-- Ordinal Legend display--><li ng-if="!isEdgeColorNumeric" ng-class="{'highlighted' : l.highlightOnEdgeHover}" ng-repeat="l in dataGroupLinkVMs | limitTo: ui.linkGroupsViewCount track by l.originalTitle" ng-click="selectEdgesByAttrib(l.name, $event)" class="panel-item pointable-cursor animate-repeat"><div uib-tooltip="{{l.descr}}" tooltip-placement="left" tooltip-append-to-body="true" class="row flex-container pointable-cursor"><div class="col-xs-1 flex-fill"><div ng-if="!l.editClusterName" class="legend-icon"><div class="link-mask"><div ng-style="{'border-color': l.colorval}" class="link-circle"></div></div></div><input type="color" ng-model="l.colorval" ng-click="$event.stopPropagation();" ng-change="changeColor(l, l.colorval)" ng-if="l.editClusterName"/></div><div ng-if="!l.editClusterName" class="col-xs-2"><h6 class="pull-right panel-number">{{l.num}}</h6></div><div ng-if="!l.editClusterName" class="col-xs-8"><h6 class="less-gutter">{{l.name}}</h6></div><div ng-if="l.editClusterName" ng-click="$event.stopPropagation()" class="col-xs-11 form-inline"><div class="row"><div class="col-xs-10"><input type="text" ng-model="l.name" ng-model-options="{ debounce: 1000 }" dir-select-all="dir-select-all" class="form-control small-control h6"/><input type="text" ng-model="l.descr" ng-model-options="{ debounce: 1000 }" dir-select-all="dir-select-all" class="form-control small-control h6"/></div><div ng-show="l.showClusterEdit &amp;&amp; l.editClusterName" class="col-xs-2"><button type="button" ng-click="$event.stopPropagation(); updateClusterInfo(l); l.showClusterEdit = false; l.editClusterName = false;" class="square-btn small-btn panel-btn pull-left"><i class="fa fa-fw fa-check"></i></button><button type="button" ng-click="$event.stopPropagation(); l.showClusterEdit = false; l.editClusterName = false; cancelClusterNameEdit(l)" class="square-btn small-btn panel-btn pull-left"><i class="fa fa-fw fa-times"></i></button></div></div></div><div ng-show="!l.editClusterName" class="col-xs-1"><div ng-show="l.showClusterEdit &amp;&amp; !l.editClusterName"><a type="button" ng-click="$event.stopPropagation(); l.editClusterName = true;" class="visible-btn vcenter"><i class="text-muted-light fa fa-pencil"></i></a></div></div></div></li><div class="row"><div class="col-xs-12"><a ng-show="dataGroupLinkVMs.length &gt; ui.linkGroupsViewCount" ng-click="loadMoreLinkGroups(); $event.stopPropagation();" class="more-text h6 pull-right pointable-cursor"><em>more&hellip;</em></a><!-- Numerical Legend display--><li ng-if="isLinkColorNumeric" ng-repeat="l in dataGroupVMs | limitTo: ui.linkGroupsViewCount track by l.originalTitle" uib-tooltip="{{l.descr}}" tooltip-placement="left" tooltip-append-to-body="true" class="panel-item pointable-cursor vert-align row"><div class="col-xs-1"><div class="link-mask"><!--l.color needs to return border color--><div ng-style="l.color" class="link-circle"></div></div></div><div ng-style="{'cursor': 'pointer'}" class="col-xs-10 h6">{{l.num}} {{l.name}}</div><a ng-show="dataGroupLinkVMs.length &gt; ui.linkGroupsViewCount" ng-click="loadMoreLinkGroups(); $event.stopPropagation();" class="more-text h6 pointable-cursor"><em>more&hellip;</em></a></li></div></div></ul></div></div></div>