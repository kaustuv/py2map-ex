<div ng-controller="SpreadSheetCtrl" class="row"><div ng-if="diModalData.dataAvailable" class="list-wrapper max-height nowrap width-100"><div ng-click="diModalData.summaryOpen = !diModalData.summaryOpen" ng-class="{'active':diModalData.summaryOpen}" uib-tooltip="Summary" tooltip-placement="left" tooltip-append-to-body="true" class="summary-btn vert-align"><i class="fa fa-ellipsis-h"></i></div><div ng-class="{'col-xs-8': diModalData.summaryOpen, 'col-xs-12': !diModalData.summaryOpen}" class="list animate"><div ng-if="diModalData.editMode"><div ng-if="spreadSheetData.mergeMachine.conflicts"><h4 class="bg-danger">{{spreadSheetData.mergeMachine.mergeErrorObj.error}}</h4><h4>{{spreadSheetData.mergeMachine.mergeErrorObj.action}}</h4></div><div ng-show="spreadSheetData.mergeMachine.datasetAdditions.length &gt; 0" class="title-style vert-align"><h5 class="text-success">{{spreadSheetData.mergeMachine.datasetAdditions.length}} new nodes will be added.</h5></div><div><div class="row title-style vert-align"><div class="col-xs-4"><div class="row vert-align"><div class="col-xs-2"><a uib-tooltip="{{ {true:'ex', false: 'in'}[spreadSheetData.mergeMachine.allNewSelected]+ 'clude all'}}" tooltip-placement="right" ng-click="spreadSheetData.mergeMachine.toggleAllAttrs('new')" ng-class="{true:'active', false: ''}[spreadSheetData.mergeMachine.allNewSelected]" class="select-btn btn-icon-round btn-icon-round-sm btn-line-default"><i ng-class="{true:'fa-check', false:'fa-check white'}[spreadSheetData.mergeMachine.allNewSelected]" class="fa"></i></a></div><div class="col-xs-10"><h4>Attributes(New)</h4></div></div></div><div class="col-xs-4"><div class="row vert-align"><div class="col-xs-2"><a uib-tooltip="{{ {true:'ex', false: 'in'}[spreadSheetData.mergeMachine.allExistingSelected]+ 'clude all'}}" tooltip-placement="right" ng-click="spreadSheetData.mergeMachine.toggleAllAttrs('existing')" ng-class="{true:'active', false: ''}[spreadSheetData.mergeMachine.allExistingSelected]" class="select-btn btn-icon-round btn-icon-round-sm btn-line-default"><i ng-class="{true:'fa-check', false:'fa-check white'}[spreadSheetData.mergeMachine.allExistingSelected]" class="fa"></i></a></div><div class="col-xs-10"><h4>Attributes(Existing)</h4></div></div></div></div><div ng-repeat="attr in spreadSheetData.mergeMachine.attrListing" class="row border-section title-style"><div ng-class="{'bg-primary':(attr.state == 'add' || attr.state == 'update'), 'bg-danger': (attr.state == 'delete')}" class="row-bkgrnd"></div><div class="col-xs-4"><div ng-if="attr.inNewData"><div class="row vert-align"><div class="col-xs-2"><a ng-click="attr.togglePreferNew(); spreadSheetData.mergeMachine.checkForAllAttrSelection('new');" ng-class="{true:'active', false: ''}[attr.preferNew]" class="select-btn btn-icon-round btn-icon-round-sm btn-line-default"><i ng-class="{true:'fa-check', false:'fa-check white'}[attr.preferNew]" class="fa"></i></a></div><div class="col-xs-10"> <h5>{{::attr.id}}</h5><h6 class="count">{{attr.counts.total_new}} values</h6></div></div></div></div><div class="col-xs-4"><div ng-if="attr.inExistingData"><div class="row vert-align"><div class="col-xs-2"><a ng-click="attr.togglePreferExisting(); spreadSheetData.mergeMachine.checkForAllAttrSelection('existing');" ng-class="{true:'active', false: ''}[attr.preferExisting]" class="select-btn btn-icon-round btn-icon-round-sm btn-line-default"><i ng-class="{true:'fa-check', false:'fa-check white'}[attr.preferExisting]" class="fa"></i></a></div><div class="col-xs-10"><h5>{{::attr.id}}</h5><h6 class="count">{{attr.counts.total_existing}} values</h6></div></div></div></div><div class="col-xs-3"><h6 ng-class="{'text-light':(attr.state == 'no_change'), 'text-primary':(attr.state == 'add' || attr.state == 'update'), 'text-danger':(attr.state == 'delete') }" class="row vert-align"><div class="col-xs-3"><span ng-if="attr.state == 'add' || attr.state == 'update'"><i class="fa fa-2x fa-plus"></i></span><span ng-if="attr.state == 'delete'"><span ng-if="!attr.isRequired"><i class="fa fa-2x fa-minus"></i></span><span ng-if="attr.isRequired"><i class="fa fa-2x fa-times"></i></span></span><span ng-if="attr.state == 'no_change'"><i class="fa fa-2x fa-minus"> </i><i style="margin-top: -19px; display: block;" class="fa fa-2x fa-minus"></i></span></div><div class="col-xs-9"><span>{{attr.stateLine}}</span><button ng-if="attr.state == 'delete' &amp;&amp; attr.isRequired" uib-tooltip="{{attr.persistReason}}" tooltip-append-to-body="true" ng-click="" class="btn btn-xs">?</button></div></h6></div></div></div></div><div ng-if="!diModalData.editMode"><div ng-if="diModalData.tabsStatus.nodes"><div ng-if="spreadSheetData.createData.removedReservedAttrs.length &gt; 0" class="row title-style"><div class="col-xs-10"><h5 class="no-margin text-danger">Following attributes were removed because they conflict with our reserved attribute names!</h5><span ng-repeat="attrTitle in spreadSheetData.createData.removedReservedAttrs" class="h6">{{::attrTitle}},&nbsp;</span><div class="divider"></div><div class="divider"></div></div></div><div class="row title-style vert-align"><div class="col-xs-1"><a uib-tooltip="{{ {true:'ex', false: 'in'}[spreadSheetData.attrsData.allLocalAttrsSelected]+ 'clude all'}}" tooltip-placement="right" ng-click="toggleAllLocalAttrs()" class="select-btn btn-icon-round btn-icon-round-sm btn-line-default"><i ng-class="{true:'fa-times', false:'fa-check white'}[spreadSheetData.attrsData.allLocalAttrsSelected]" ng-click="setAllLocalAttrsSelection()" class="fa"></i></a></div><div class="col-xs-4"><h4>Attributes</h4><!--h6.count {{::spreadSheetData.nodesCount}} values--></div><div class="col-xs-2"><h4>Type</h4></div></div><div class="clearfix"></div><div ng-repeat="attr in spreadSheetData.attrsData.combinedAttrs" ng-show="::attr.local" ng-class="{true: 'active'}[attr.isLocalChecked]" class="row border-section title-style vert-align show-on-hover-target no-active"><div class="col-xs-1"><a uib-tooltip="{{ {true:'ex', false: 'in'}[attr.isLocalChecked]+ 'clude'}}" tooltip-placement="right" ng-click="attr.isLocalChecked = !attr.isLocalChecked;" class="select-btn btn-icon-round btn-icon-round-sm show-on-hover btn-line-default"><i ng-class="{true:'fa-times', false:'fa-check white'}[attr.isLocalChecked]" ng-click="setAllLocalAttrsSelection()" class="fa"></i></a></div><div class="col-xs-4"><div ng-show="editTitle" class="row vert-align"><div ng-show="editTitle" ng-class="{true:'', false:'text-muted-light'}[attr.visible]" class="truncate col-xs-8"><input ng-model="attr.title" ng-minlength="1" class="h6 form-control"/></div><div uib-tooltip="Save" type="button" ng-click="validateNewAttrTitle(attr, spreadSheetData.attrsData.combinedAttrs); editTitle = false;" class="col-xs-2 h6 visible-btn"> <i class="fa fa-check"></i></div><div uib-tooltip="Cancel" type="button" ng-click="attr.title = attr.id; editTitle = false;" class="col-xs-2 h6 visible-btn"><i class="fa fa-times"></i></div></div><div ng-show="!editTitle"><h5 ng-class="{true:'', false:'text-muted-light'}[attr.isLocalChecked]">{{attr.title}}</h5><h6 ng-class="{true:'', false:'text-muted-light'}[attr.isLocalChecked]" class="count">{{::attr.attrNodeCount}} values</h6></div></div><div class="col-xs-2"><div ng-show="attr.isLocalChecked" class="ui-select"><select ng-model="attr.newAttrType" ng-change="changeNodeAttrType(attr);" ng-options="atype for atype in spreadSheetData.attrTypes"><option value="{{attr.attrType}}"></option></select></div></div><div class="col-xs-4"></div><div class="col-xs-1"><h6><a ng-show="attr.isLocalChecked" ng-click="editTitle = true;" uib-tooltip="Edit" class="visible-btn show-on-hover"><i class="fa fa-pencil"></i></a></h6></div></div></div><div ng-if="diModalData.tabsStatus.links"><div ng-if="::spreadSheetData.attrsData.nwLinkAttrs.length &gt; 0"><div class="row title-style"><div class="col-xs-1"></div><div class="col-xs-4"><h4>Attributes</h4><h6 class="count">{{::spreadSheetData.linksCount}} values</h6></div><div class="col-xs-2"><h4>Type</h4></div></div><div class="clearfix"></div><div ng-repeat="attr in spreadSheetData.attrsData.nwLinkAttrs" class="row border-section title-style vert-align show-on-hover-target"><div class="col-xs-1"></div><div class="col-xs-4"><h5>{{::attr.title}}</h5><h6 class="count">{{::attr.attrLinkCount}} values</h6></div><div class="col-xs-2"><div class="ui-select"><select ng-model="attr.newAttrType" ng-change="changeLinkAttrType(attr);" ng-options="atype for atype in spreadSheetData.attrTypes"><option value="{{attr.attrType}}"></option></select></div></div><div class="col-xs-4"></div><div class="col-xs-1"><a ng-click="attr.visible = !attr.visible;" uib-tooltip="Visibility" class="visible-btn show-on-hover"><i ng-class="{true:'fa-eye', false:'fa-eye-slash text-muted'}[attr.visible]" class="fa"></i></a></div></div></div><div ng-if="::spreadSheetData.attrsData.nwLinkAttrs.length &lt; 1"><div class="row title-style"><div class="col-xs-12"><h4>No attributes were found associated with the links</h4></div></div></div></div></div></div><div ng-if="diModalData.summaryOpen" class="meta-list col-xs-4 animate-to-left"><div ng-if="!diModalData.editMode"><h4>Summary</h4><div class="row border-section title-style"><div class="col-xs-12"><span>Source Info</span></div><div class="col-xs-12"><span>{{::spreadSheetData.file.name}}</span></div></div><div class="row border-section title-style"><div class="col-xs-4"><span>&nbsp;&nbsp;{{spreadSheetData.nodesCount}} Rows</span></div><div class="col-xs-4"><span>&nbsp;&nbsp;{{spreadSheetData.edgesCount}} Edges</span></div><div class="col-xs-4"><span>{{spreadSheetData.createData.localColumns.length}} Columns</span></div></div></div><div ng-if="diModalData.editMode"><h4>Info</h4><div class="row border-section title-style"><div class="col-xs-12">{{spreadSheetData.file.name}}</div></div><div class="row border-section title-style"><div class="col-xs-4 text-center"><i class="fa fa-fw fa-list"></i><span>{{spreadSheetData.nodesCount}} Rows</span></div><div class="col-xs-4 text-center"><i class="fa fa-fw fa-expand"></i><span>{{spreadSheetData.edgesCount}} Links</span></div><div class="col-xs-4 text-center"><i class="fa fa-fw fa-list-alt"></i><span>{{spreadSheetData.mergeData.localColumns.length}} </span><span>Attrs</span></div></div><div class="row border-section title-style"><div class="col-xs-12"><h4>Merge Summary</h4></div><div ng-if="spreadSheetData.mergeData.isDifferent"><div ng-show="::spreadSheetData.mergeData.summary.nodesAdded.length === 1" class="col-xs-12">- {{::spreadSheetData.mergeData.summary.nodesAdded.length}} node will be added</div><div ng-show="::spreadSheetData.mergeData.summary.nodesAdded.length &gt; 1" class="col-xs-12">- {{::spreadSheetData.mergeData.summary.nodesAdded.length}} nodes will be added</div><div ng-show="::spreadSheetData.mergeData.summary.nodesUpdated.length === 1" class="col-xs-12">- {{::spreadSheetData.mergeData.summary.nodesUpdated.length}} node will be updated</div><div ng-show="::spreadSheetData.mergeData.summary.nodesUpdated.length &gt; 1" class="col-xs-12">- {{::spreadSheetData.mergeData.summary.nodesUpdated.length}} nodes will be updated</div><div ng-show="::spreadSheetData.mergeData.summary.attrsAdded.length === 1" class="col-xs-12">- {{::spreadSheetData.mergeData.summary.attrsAdded.length}} node attribute will be added</div><div ng-show="::spreadSheetData.mergeData.summary.attrsAdded.length &gt; 1" class="col-xs-12">- {{::spreadSheetData.mergeData.summary.attrsAdded.length}} node attributes will be added</div></div><div ng-if="!spreadSheetData.mergeData.isDifferent" class="title-style"><div class="col-xs-12"><p>Nothing new</p></div></div></div><div class="divider"></div><div ng-if="spreadSheetData.mergeData.mergeConflicts" class="row border-section title-style"><div class="col-xs-12"><h4 class="text-danger">Merge Errors</h4><div class="col-xs-12">Following attributes can't be deleted because they are currently being used in one or more snapshots:</div><div class="col-xs-12"><div class="col-xs-3">Attribute</div><div class="col-xs-9">Snapshots</div></div><div ng-repeat="(attrName, snapsList) in spreadSheetData.mergeData.conflictedAttrs" class="col-xs-12"><div class="col-xs-3">{{::attrName}}</div><div class="col-xs-9"><span ng-repeat="snap in snapsList"><span>{{::snap}}</span><span>,&nbsp;</span></span></div></div></div></div></div></div></div><div ng-if="!diModalData.dataAvailable" class="col-xs-12"><div class="divider"></div><div class="divider"></div><div ng-if="diModalData.subview === 'file'" class="row"><div ng-controller="LocalSheetsCtrl"><div ngf-drop="uploadLocalFiles($files)" ngf-multiple="false" ngf-drag-over-class="'over'" accept=".xls, .xlsx, .csv, .gexf" class="col-xs-12 text-center"><h3 class="drag-and-drop vert-align">Drag &amp; Drop a File Here<i class="fa fa-file"></i></h3><h3 class="muted">or</h3><button ngf-select="uploadLocalFiles($files)" accept=".xls, .xlsx, .csv, .gexf" class="power-btn">Choose File</button><div class="divider"></div><div class="divider"></div><div class="divider"></div><h6><strong>File Notes:&nbsp;</strong>We currently support .xls, .xlsx, .csv and .gexf files only.</h6></div></div></div><div ng-if="diModalData.subview === 'url'" class="row"><form ng-controller="LocalSheetsCtrl" class="col-xs-12 text-center"><h4 class="no-margin text-left">Add a URL</h4><div class="divider"></div><input type="url" ng-model="uploadInfo.importUrl" placeholder="Enter the url to the data file..." class="form-control"/><div class="divider"></div><div class="divider"></div><button ng-hide="uploadInfo.importUrl == ''" type="submit" ng-click="importFromUrl()" ng-disabled="!uploadInfo.importUrl" class="power-btn">Import Data</button><div class="divider"></div><div class="divider"></div><div class="divider"></div><h6><strong>File Notes:&nbsp;</strong>We currently support .xls, .xlsx, .csv and .gexf files only.</h6></form></div><div ng-if="diModalData.subview === 'googlespreadsheet'" class="row"><div ng-controller="GoogleSpreadsheetCtrl" class="col-xs-12"><div class="row vert-align title-style"><div class="col-xs-10"><h3>Your Spreadsheets</h3></div><div class="col-xs-2"><button ng-show="showAuthorizeBtn" ng-click="handleAuthorize()" class="pull-right power-btn">Authorize</button><button ng-show="showRefreshBtn" ng-click="refreshFiles()" class="pull-right power-btn">Refresh</button></div></div><div ng-repeat="spreadsheet in spreadsheets" class="row vert-align title-style"><div class="col-xs-10"><h5>{{spreadsheet.title}}</h5></div><div class="col-xs-2 pull-right"><button type="button" ng-click="uploadSpreadsheet(spreadsheet)" class="btn btn-xs btn-primary">Upload</button></div></div></div></div></div></div>